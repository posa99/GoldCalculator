<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Price Calculator - Philippines</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-yellow-50 to-amber-100 min-h-screen">
    <div id="app"></div>

    <script>
        // App state
        let isLoggedIn = false;
        let currentUser = null;
        let showRegister = false;
        
        // Calculator state
        let goldRate = 4350; // Current Philippines gold rate per gram
        let grams = 0;
        let makingCharge = 0;
        let selectedPurity = '24k';
        
        const purityRates = {
            '24k': 1.0,
            '22k': 0.916,
            '21k': 0.875,
            '18k': 0.75,
            '14k': 0.583,
            '10k': 0.417
        };

        function calculateFinalPrice() {
            const purityMultiplier = purityRates[selectedPurity];
            const goldValue = goldRate * grams * purityMultiplier;
            const subtotal = goldValue + makingCharge;
            const tax = subtotal * 0.12;
            const finalPrice = subtotal + tax;
            
            return {
                goldRate: goldRate * purityMultiplier,
                grams,
                makingCharge,
                tax,
                finalPrice
            };
        }

        function renderLogin() {
            return `
                <div class="min-h-screen flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-white text-2xl font-bold">Au</span>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">Gold Price Calculator</h1>
                            <p class="text-gray-600">Philippines Gold Rate Calculator</p>
                        </div>

                        ${!showRegister ? `
                            <div class="space-y-4">
                                <button onclick="showRegisterForm()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200">
                                    Register New Account
                                </button>
                                <button onclick="continueAsGuest()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg transition duration-200">
                                    Continue as Guest
                                </button>
                            </div>
                        ` : `
                            <form onsubmit="handleRegister(event)" class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                    <input type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" id="name">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" id="email">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                    <input type="tel" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" id="phone">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                    <input type="password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" id="password">
                                </div>
                                <div class="flex space-x-3">
                                    <button type="submit" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200">
                                        Register
                                    </button>
                                    <button type="button" onclick="hideRegisterForm()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg transition duration-200">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        `}
                    </div>
                </div>
            `;
        }

        function renderCalculator() {
            const calculation = calculateFinalPrice();
            
            return `
                <div class="min-h-screen p-4">
                    <div class="max-w-6xl mx-auto">
                        <header class="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xl font-bold">Au</span>
                                    </div>
                                    <div>
                                        <h1 class="text-2xl font-bold text-gray-800">Gold Price Calculator</h1>
                                        <p class="text-gray-600">Philippines Live Gold Rates</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-600">Welcome, ${currentUser?.name || 'Guest'}</p>
                                    <button onclick="logout()" class="text-sm text-red-600 hover:text-red-700">
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </header>

                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h2 class="text-xl font-bold text-gray-800 mb-6">Gold Calculator</h2>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Gold Purity</label>
                                        <select onchange="updatePurity(this.value)" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                            <option value="24k" ${selectedPurity === '24k' ? 'selected' : ''}>24 Karat (99.9% Pure)</option>
                                            <option value="22k" ${selectedPurity === '22k' ? 'selected' : ''}>22 Karat (91.6% Pure)</option>
                                            <option value="21k" ${selectedPurity === '21k' ? 'selected' : ''}>21 Karat (87.5% Pure)</option>
                                            <option value="18k" ${selectedPurity === '18k' ? 'selected' : ''}>18 Karat (75% Pure)</option>
                                            <option value="14k" ${selectedPurity === '14k' ? 'selected' : ''}>14 Karat (58.3% Pure)</option>
                                            <option value="10k" ${selectedPurity === '10k' ? 'selected' : ''}>10 Karat (41.7% Pure)</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">
                                            Gold Rate (₱/gram) - Current Philippines Rate
                                        </label>
                                        <input type="number" value="${goldRate}" onchange="updateGoldRate(this.value)" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                        <p class="text-xs text-gray-500 mt-1">Live rate: ₱${goldRate}/gram for 24k</p>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Weight (grams)</label>
                                        <input type="number" value="${grams}" onchange="updateGrams(this.value)" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Making Charge (₱)</label>
                                        <input type="number" value="${makingCharge}" onchange="updateMakingCharge(this.value)" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h2 class="text-xl font-bold text-gray-800 mb-6">Price Breakdown</h2>
                                
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Gold Rate (${selectedPurity})</span>
                                        <span class="font-semibold">₱${calculation.goldRate.toFixed(2)}/gram</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Weight</span>
                                        <span class="font-semibold">${calculation.grams} grams</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Gold Value</span>
                                        <span class="font-semibold">₱${(calculation.goldRate * calculation.grams).toFixed(2)}</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Making Charge</span>
                                        <span class="font-semibold">₱${calculation.makingCharge.toFixed(2)}</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Subtotal</span>
                                        <span class="font-semibold">₱${(calculation.goldRate * calculation.grams + calculation.makingCharge).toFixed(2)}</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-2 border-b">
                                        <span class="text-gray-600">Tax (12%)</span>
                                        <span class="font-semibold">₱${calculation.tax.toFixed(2)}</span>
                                    </div>
                                    
                                    <div class="flex justify-between items-center py-3 bg-yellow-50 rounded-lg px-4">
                                        <span class="text-lg font-bold text-gray-800">Final Price</span>
                                        <span class="text-xl font-bold text-yellow-600">₱${calculation.finalPrice.toFixed(2)}</span>
                                    </div>
                                </div>

                                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                                    <p class="text-sm text-blue-800">
                                        <strong>Formula:</strong> (Gold Rate × Grams × Purity) + Making Charge + 12% Tax = Final Price
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Quick Reference - Philippines Gold Purity</h2>
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                                ${Object.entries(purityRates).map(([karat, purity]) => `
                                    <div class="text-center p-3 bg-gray-50 rounded-lg">
                                        <div class="font-bold text-gray-800">${karat.toUpperCase()}</div>
                                        <div class="text-xs text-gray-600">${(purity * 100).toFixed(1)}% Pure</div>
                                        <div class="text-sm font-semibold text-yellow-600">₱${(goldRate * purity).toFixed(0)}/g</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            app.innerHTML = isLoggedIn ? renderCalculator() : renderLogin();
        }

        function showRegisterForm() {
            showRegister = true;
            render();
        }

        function hideRegisterForm() {
            showRegister = false;
            render();
        }

        function handleRegister(event) {
            event.preventDefault();
            currentUser = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value
            };
            isLoggedIn = true;
            showRegister = false;
            render();
        }

        function continueAsGuest() {
            isLoggedIn = true;
            render();
        }

        function logout() {
            isLoggedIn = false;
            currentUser = null;
            showRegister = false;
            render();
        }

        function updatePurity(value) {
            selectedPurity = value;
            render();
        }

        function updateGoldRate(value) {
            goldRate = Number(value);
            render();
        }

        function updateGrams(value) {
            grams = Number(value);
            render();
        }

        function updateMakingCharge(value) {
            makingCharge = Number(value);
            render();
        }

        // Initial render
        render();
    </script>
</body>
</html>
